{
    "vfp_id": "vfp_00621",
    "project_name": "ackee-blockchain-lido-stonks-2.0-report.pdf",
    "findings": [
        {
            "id": 15,
            "category": {
                "1": [
                    "CWE-710"
                ],
                "2": [
                    "CWE-1068"
                ]
            },
            "title": "Misleading event parameter name",
            "description": "The AmountConverterFactory emits an event called AmountConverterDeployed with a parameter named allowedStableTokensToBuy, implying that only stablecoins can be bought. However, the protocol supports buying any token, not just stablecoins. The root cause is inaccurate naming that misrepresents functionality. This can mislead developers integrating with the system into assuming restrictions that do not exist, potentially leading to incorrect logic or missed opportunities. The impact is confusion and integration errors, reducing the clarity and usability of the API.\n",
            "severity": "Informational",
            "location": [
                "AmountConverterFactory#19-25"
            ],
            "files": [
                "stonks/contracts/factories/AmountConverterFactory.sol"
            ]
        }
    ],
    "affected_files": {
        "AmountConverterFactory.sol": "// SPDX-FileCopyrightText: 2024 Lido <info@lido.fi>\n// SPDX-License-Identifier: MIT\npragma solidity 0.8.23;\n\nimport {AmountConverter} from \"../AmountConverter.sol\";\n\n/**\n * @title AmountConverterFactory\n * @notice Deploys new instances of the AmountConverter contract with predefined configuration.\n */\ncontract AmountConverterFactory {\n    // ==================== Immutables ====================\n\n    /// @notice Address of the OracleRouter contract.\n    address public immutable ORACLE_ROUTER;\n\n    // ==================== Events ====================\n\n    event AmountConverterDeployed(\n        address indexed amountConverterAddress,\n        address oracleRouter,\n        address[] allowedTokensToSell,\n        address[] allowedStableTokensToBuy,\n        bool useEthAnchor\n    );\n\n    // ==================== Errors ====================\n\n    error InvalidOracleRouterAddress(address oracleRouter);\n\n    // ==================== Constructor ====================\n\n    /**\n     * @param oracleRouter_ The address of the OracleRouter contract\n     */\n    constructor(address oracleRouter_) {\n        if (oracleRouter_ == address(0)) {\n            revert InvalidOracleRouterAddress(oracleRouter_);\n        }\n\n        ORACLE_ROUTER = oracleRouter_;\n    }\n\n    // ==================== External Functions ====================\n\n    /**\n     * @notice Deploys a new AmountConverter contract with specified parameters\n     * @param allowedTokensToSell_ Array of addresses of tokens allowed to be sold\n     * @param allowedTokensToBuy_ Array of addresses of tokens allowed to be bought\n     * @param useEthAnchor_ If true, uses ETH-anchored pricing (both tokens must be ETH-quoted).\n     *                      If false, uses USD pricing (supports any denomination mix).\n     * @return tokenAmountConverter The address of the newly deployed AmountConverter contract\n     */\n    function deployAmountConverter(\n        address[] memory allowedTokensToSell_,\n        address[] memory allowedTokensToBuy_,\n        bool useEthAnchor_\n    ) external returns (address tokenAmountConverter) {\n        tokenAmountConverter = address(\n            new AmountConverter(\n                ORACLE_ROUTER,\n                allowedTokensToSell_,\n                allowedTokensToBuy_,\n                useEthAnchor_\n            )\n        );\n\n        emit AmountConverterDeployed(\n            tokenAmountConverter,\n            ORACLE_ROUTER,\n            allowedTokensToSell_,\n            allowedTokensToBuy_,\n            useEthAnchor_\n        );\n    }\n}\n"
    }
}