{
    "vfp_id": "vfp_00536",
    "project_name": "Uniswap Calibur Audit.md",
    "findings": [
        {
            "id": 9,
            "category": {
                "1": [
                    "CWE-664"
                ],
                "2": [
                    "CWE-221"
                ],
                "3": [
                    "CWE-223"
                ],
                "4": [
                    "CWE-778"
                ]
            },
            "title": "Missing Event Emissions",
            "description": "Several state-changing functions, including `setERC1271CallerIsSafe`, `update`, and `_useNonce`, do not emit events, making it difficult to track changes off-chain. The root cause is the omission of event declarations in these functions. An attacker or malicious relayer could exploit the lack of transparency to perform stealthy changes that are hard to monitor. The impact is reduced observability, complicating wallet tracking, auditing, and debugging, which harms user trust and system transparency.\n",
            "severity": "Low",
            "location": [
                "ERC1271.sol::setERC1271CallerIsSafe#20",
                "KeyManagement.sol::update#32",
                "NonceManager.sol::_useNonce#37"
            ],
            "files": [
                "732a20a8d82f034573c6c7e44160f1860233a946/minimal-delegation/src/ERC1271.sol"
            ]
        }
    ],
    "affected_files": {
        "ERC1271.sol": "// SPDX-License-Identifier: UNLICENSED\npragma solidity ^0.8.23;\n\nimport {IERC1271} from \"./interfaces/IERC1271.sol\";\nimport {BaseAuthorization} from \"./BaseAuthorization.sol\";\n\n/// @title ERC-1271\n/// @notice Abstract ERC1271 implementation which supports nested EIP-712 workflows as defined by ERC-7739\nabstract contract ERC1271 is IERC1271, BaseAuthorization {\n    /// @dev Returns whether the caller is considered safe, such\n    /// that we don't need to use the nested EIP-712 workflow as defined by ERC-7739\n    mapping(address => bool) public erc1271CallerIsSafe;\n\n    /// @dev The magic value returned by `isValidSignature()` if the signature is valid.\n    bytes4 internal constant _1271_MAGIC_VALUE = 0x1626ba7e;\n    /// @dev The magic value returned by `isValidSignature()` if the signature is invalid.\n    bytes4 internal constant _1271_INVALID_VALUE = 0xffffffff;\n\n    /// @dev Sets whether the caller is considered safe to skip the nested EIP-712 workflow\n    function setERC1271CallerIsSafe(address caller, bool isSafe) external onlyThis {\n        erc1271CallerIsSafe[caller] = isSafe;\n    }\n\n    /// @inheritdoc IERC1271\n    function isValidSignature(bytes32 hash, bytes calldata signature) public view virtual returns (bytes4);\n}\n"
    }
}