{
    "vfp_id": "vfp_00555",
    "project_name": "cantina_seamless_april2025.pdf",
    "findings": [
        {
            "id": 4,
            "category": {
                "1": [
                    "CWE-710"
                ]
            },
            "title": "Struct that is written to and accessed in storage could be optimized from 3 slots to 1",
            "description": "1. **Description:** The Auction struct in DataTypes.sol uses three storage slots due to inefficient packing of its fields, increasing gas costs for storage operations.\n2. **Cause:** The struct contains two uint256 timestamps and a bool, which are not tightly packed, resulting in suboptimal storage layout.\n3. **Exploitation:** This is not exploitable in a security sense but leads to higher gas consumption on every write and read operation involving the struct.\n4. **Impact:** Increased transaction costs for users interacting with functionality that uses the Auction struct, reducing efficiency and economic viability.\n",
            "severity": "Informational",
            "location": [
                "DataTypes.sol::#L38-L46"
            ],
            "files": [
                "leverage-tokens/src/types/DataTypes.sol"
            ]
        }
    ],
    "affected_files": {
        "DataTypes.sol": "// SPDX-License-Identifier: MIT\npragma solidity ^0.8.26;\n\nimport {ILendingAdapter} from \"src/interfaces/ILendingAdapter.sol\";\nimport {IRebalanceAdapterBase} from \"src/interfaces/IRebalanceAdapterBase.sol\";\nimport {ILeverageToken} from \"src/interfaces/ILeverageToken.sol\";\n\n/// @dev Enum defining internal actions that a LendingAdapter can perform on a lending pool\nenum ActionType {\n    AddCollateral,\n    RemoveCollateral,\n    Borrow,\n    Repay\n}\n\n/// @dev Enum defining actions that users can perform on a LeverageToken\nenum ExternalAction {\n    Deposit,\n    Withdraw\n}\n\n/// @dev Struct that contains all data related to a LeverageToken action\nstruct ActionData {\n    /// @dev Amount of collateral added or withdrawn\n    uint256 collateral;\n    /// @dev Amount of debt borrowed or repaid\n    uint256 debt;\n    /// @dev Amount of equity added or withdrawn before fees, denominated in collateral asset\n    uint256 equity;\n    /// @dev Amount of shares minted or burned to user\n    uint256 shares;\n    /// @dev Fee charged for the action to the leverage token, denominated in collateral asset\n    uint256 tokenFee;\n    /// @dev Fee charged for the action to the treasury, denominated in collateral asset\n    uint256 treasuryFee;\n}\n\n/// @dev Struct containing auction parameters\nstruct Auction {\n    /// @dev Whether the LeverageToken is over-collateralized\n    bool isOverCollateralized;\n    /// @dev Timestamp when the auction started\n    uint256 startTimestamp;\n    /// @dev Timestamp when the auction ends/ended\n    uint256 endTimestamp;\n}\n\n/// @dev Struct that contains the base LeverageToken config stored in LeverageManager\nstruct BaseLeverageTokenConfig {\n    /// @dev LendingAdapter for the LeverageToken\n    ILendingAdapter lendingAdapter;\n    /// @dev RebalanceAdapter for the LeverageToken\n    IRebalanceAdapterBase rebalanceAdapter;\n}\n\n/// @dev Struct that contains the entire LeverageToken config\nstruct LeverageTokenConfig {\n    /// @dev LendingAdapter for the LeverageToken\n    ILendingAdapter lendingAdapter;\n    /// @dev RebalanceAdapter for the LeverageToken\n    IRebalanceAdapterBase rebalanceAdapter;\n    /// @dev Fee for deposit action\n    uint256 depositTokenFee;\n    /// @dev Fee for withdraw action, defined as a percentage\n    uint256 withdrawTokenFee;\n}\n\n/// @dev Struct that contains all data describing the state of a LeverageToken\nstruct LeverageTokenState {\n    /// @dev Collateral denominated in debt asset\n    uint256 collateralInDebtAsset;\n    /// @dev Debt\n    uint256 debt;\n    /// @dev Equity denominated in debt asset\n    uint256 equity;\n    /// @dev Collateral ratio on 8 decimals\n    uint256 collateralRatio;\n}\n\n/// @dev Struct that contains all data related to a rebalance action\nstruct RebalanceAction {\n    /// @dev LeverageToken to perform the action on\n    ILeverageToken leverageToken;\n    /// @dev Type of action to perform\n    ActionType actionType;\n    /// @dev Amount to perform the action with\n    uint256 amount;\n}\n\n/// @dev Struct that contains all data related to a token transfer\nstruct TokenTransfer {\n    /// @dev Token to transfer\n    address token;\n    /// @dev Amount to transfer\n    uint256 amount;\n}\n"
    }
}