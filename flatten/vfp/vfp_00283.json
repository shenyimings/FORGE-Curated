{
    "vfp_id": "vfp_00283",
    "project_name": "Uniswap Labs UNIfication Fees Diff Audit.md",
    "findings": [
        {
            "id": 2,
            "category": {
                "1": [
                    "CWE-664"
                ],
                "2": [
                    "CWE-221"
                ],
                "3": [
                    "CWE-223"
                ],
                "4": [
                    "CWE-778"
                ]
            },
            "title": "Lack of Event Emission in `release` Function",
            "description": "1. **Description:** The `release` function in the `ExchangeReleaser.sol` abstract contract does not emit an event upon successful execution, despite performing a critical operation: releasing assets from the `TokenJar`.\n2. **Cause:** The function was implemented without including an event to log the release action, likely an oversight in design for off-chain observability.\n3. **Exploitation:** This cannot be exploited maliciously, but it hinders external systems from tracking or reacting to asset releases in real time.\n4. **Impact:** The absence of an event reduces the transparency and auditability of the system, making it difficult for indexers, monitoring tools, and users to observe when and how assets are released, potentially affecting trust and integration capabilities.\n",
            "severity": "Informational",
            "location": [
                "ExchangeReleaser.sol::release"
            ],
            "files": [
                "protocol-fees/src/releasers/ExchangeReleaser.sol"
            ]
        }
    ],
    "affected_files": {
        "ExchangeReleaser.sol": "// SPDX-License-Identifier: AGPL-3.0-only\npragma solidity ^0.8.29;\n\nimport {Currency} from \"v4-core/types/Currency.sol\";\nimport {ERC20} from \"solmate/src/tokens/ERC20.sol\";\nimport {SafeTransferLib} from \"solmate/src/utils/SafeTransferLib.sol\";\nimport {ResourceManager} from \"../base/ResourceManager.sol\";\nimport {Nonce} from \"../base/Nonce.sol\";\nimport {IAssetSink} from \"../interfaces/IAssetSink.sol\";\nimport {IReleaser} from \"../interfaces/IReleaser.sol\";\n\n/// @title ExchangeReleaser\n/// @notice A contract that releases assets from an AssetSink in exchange for transferring a\n/// threshold\n/// amount of a resource token\n/// @dev Inherits from ResourceManager for resource transferring functionality and Nonce for replay\n/// protection\n/// @custom:security-contact security@uniswap.org\nabstract contract ExchangeReleaser is IReleaser, ResourceManager, Nonce {\n  using SafeTransferLib for ERC20;\n\n  /// @inheritdoc IReleaser\n  IAssetSink public immutable ASSET_SINK;\n\n  /// @notice Creates a new ExchangeReleaser instance\n  /// @param _resource The address of the resource token that must be transferred\n  /// @param _assetSink The address of the AssetSink contract holding the assets\n  /// @param _recipient The address that will receive the resource tokens\n  constructor(address _resource, uint256 _threshold, address _assetSink, address _recipient)\n    ResourceManager(_resource, _threshold, msg.sender, _recipient)\n  {\n    ASSET_SINK = IAssetSink(payable(_assetSink));\n  }\n\n  /// @inheritdoc IReleaser\n  function release(uint256 _nonce, Currency[] calldata assets, address recipient) external virtual {\n    _release(_nonce, assets, recipient);\n  }\n\n  /// @notice Internal function to handle the nonce check, transfer the RESOURCE, and call the\n  /// release of assets on the AssetSink.\n  function _release(uint256 _nonce, Currency[] calldata assets, address recipient)\n    internal\n    handleNonce(_nonce)\n  {\n    RESOURCE.safeTransferFrom(msg.sender, RESOURCE_RECIPIENT, threshold);\n    ASSET_SINK.release(assets, recipient);\n  }\n}\n"
    }
}