{
    "vfp_id": "vfp_00579",
    "project_name": "cantina_virtuals_may2025.pdf",
    "findings": [
        {
            "id": 0,
            "category": {
                "1": [
                    "CWE-710"
                ],
                "2": [
                    "CWE-657"
                ],
                "3": [
                    "CWE-637"
                ]
            },
            "title": "Gas savings in Genesis Contract Deployment",
            "description": "1. **Description:** The createGenesis function deploys a new Genesis contract, but the contract is unnecessarily marked as initializable, missing an opportunity for gas optimization.\n2. **Cause:** The contract is made initializable despite not requiring upgradability in this context, which adds overhead.\n3. **Exploitation:** This is not exploitable by an attacker but represents inefficient deployment design.\n4. **Impact:** Higher deployment and runtime gas costs than necessary, increasing transaction fees for users and deployers.\n",
            "severity": "Informational",
            "location": [
                "GenesisLib.sol#L32"
            ],
            "files": [
                "protocol-contracts/contracts/genesis/GenesisLib.sol"
            ]
        }
    ],
    "affected_files": {
        "GenesisLib.sol": "// GenesisLib.sol\n// SPDX-License-Identifier: MIT\npragma solidity ^0.8.26;\n\nimport {Genesis} from \"./Genesis.sol\";\nimport \"./GenesisTypes.sol\";\n\nlibrary GenesisLib {\n    function validateAndDeploy(\n        uint256 genesisID,\n        address factory,\n        GenesisCreationParams memory params,\n        bytes32 tbaSalt,\n        address tbaImpl,\n        uint32 daoVotingPeriod,\n        uint256 daoThreshold,\n        address agentFactoryAddress,\n        address virtualToken,\n        uint256 reserve,\n        uint256 maxContribution,\n        uint256 agentTokenTotalSupply,\n        uint256 agentTokenLpSupply,\n        bool noLpStake\n    ) internal returns (address) {\n        require(\n            bytes(params.genesisName).length > 0 &&\n                bytes(params.genesisTicker).length > 0 &&\n                params.genesisCores.length > 0,\n            \"Invalid params\"\n        );\n\n        Genesis newGenesis = new Genesis();\n\n        GenesisInitParams memory initParams = GenesisInitParams({\n            genesisID: genesisID,\n            factory: factory,\n            startTime: params.startTime,\n            endTime: params.endTime,\n            genesisName: params.genesisName,\n            genesisTicker: params.genesisTicker,\n            genesisCores: params.genesisCores,\n            tbaSalt: tbaSalt,\n            tbaImplementation: tbaImpl,\n            daoVotingPeriod: daoVotingPeriod,\n            daoThreshold: daoThreshold,\n            agentFactoryAddress: agentFactoryAddress,\n            virtualTokenAddress: virtualToken,\n            reserveAmount: reserve,\n            maxContributionVirtualAmount: maxContribution,\n            agentTokenTotalSupply: agentTokenTotalSupply,\n            agentTokenLpSupply: agentTokenLpSupply,\n            noLpStake: noLpStake\n        });\n\n        newGenesis.initialize(initParams);\n        return address(newGenesis);\n    }\n}\n"
    }
}